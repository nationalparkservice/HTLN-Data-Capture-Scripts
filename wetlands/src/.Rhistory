install.packages("devtools")
install.packages("devtools")
install.packages("tidayverse")
install.packages("tiday")
install.packages("tidy")
q()
install.packages("tidyverse")
library(tidyverse)
install.packages("palmerpenguins")
q()
hierarchy %>%
print(n = 10, width = Inf)
# this is a comment
# this file is my first R code for data science
library(tidyverse)
TSNhierarchy <- read_csv("C:\\Users\\growell\\HTLN-BreedingBird-Data-Package\\src\\Hierarchy_Taxa.csv")
# spec(TSNhierarchy)
hierarchy = as_tibble(TSNhierarchy)
hierarchy
hierarchy %>%
print(n = 10, width = Inf)
hierarchy %>%
View()
# figure out how to parse??
hierarchy %>%
View()
hierarchy |>
View()
hierarchy |>
mutate(
hierarchy_string2 = hierarchy_string,
)
hierarchy_string2
ierarchy |>
View()
hierarchy |>
View()
hierarchy
hierarchy |>
mutate(
hierarchy_string2 = hierarchy_string,
)
hierarchy |>
print(n = 10, width = Inf)
hierarchy |>
select(hierarchy_string)
hierarchy |>
select(hierarchy_string)
hierarchy |>
select(hierarchy_string)
print(n = 50, width = Inf)
hierarchy |>
select(hierarchy_string)
print(n = 20, width = Inf)
hierarchy |>
select(hierarchy_string)
hierarchy |>
select(hierarchy_string )
x <- hierarchy |>
select(hierarchy_string )
|.|
x <- hierarchy |>
select(hierarchy_string )
x
my_string <- hierarchy |>
select(hierarchy_string )
my_string
my_string |>
separate_wider_delim(
hierarchy_string,
delim = "-"
)
my_string |>
separate_wider_delim(
hierarchy_string,
delim = "-",
names = c("x", "y", "z"),
too_many = "drop"
)
my_string |>
separate_wider_delim(
hierarchy_string,
delim = "-",
names = c("col1", "col2", "col3", "col4",
"col5", "col6", "col7", "col8",
"col9", "col10", "col11" ),
too_many = "drop"
)
hierarchy
hierarchy |>
View()
my_string |>
separate_wider_delim(
hierarchy_string,
delim = "-",
names = c("col1", "col2", "col3", "col4",
"col5", "col6", "col7"),
too_many = "drop"
)
my_columns <- my_string |>
separate_wider_delim(
hierarchy_string,
delim = "-",
names = c("col1", "col2", "col3", "col4",
"col5", "col6", "col7"),
too_many = "drop"
)
my_columns
print(my_columns, nn = 207)
print(my_columns, n = 207)
my_columns <- my_string |>
separate_wider_delim(
hierarchy_string,
delim = "-",
names = c("col1", "col2", "col3", "col4",
"col5", "col6", "col7", "col8", "col9"),
too_many = "drop"
)
my_columns
print(my_columns, n = 207)
TSNlongnames
TSNlongnames <- read_csv(
"C:\\Users\\growell\\HTLN-BreedingBird-Data-Package\\src\\Hierarchy_Taxa.csv")
TSNlongnames <- read_csv(
"C:\\Users\\growell\\HTLN-BreedingBird-Data-Package\\src\\Itis_longnames.csv")
too_many = "drop"
hierarchy = as_tibble(TSNhierarchy)
TSNhierarchy <- read_csv(
"C:\\Users\\growell\\HTLN-BreedingBird-Data-Package\\src\\Hierarchy_Taxa.csv")
TSNlongnames <- read_csv(
"C:\\Users\\growell\\HTLN-BreedingBird-Data-Package\\src\\Itis_longnames.csv")
# select the hierarchy string column
# and parse the first 7 values in separate columns
hierarchy = as_tibble(TSNhierarchy)
longnames = as_tibble(TSNlongnames)
longnames
library(tidyverse)
TSNhierarchy <- read_csv(
"C:\\Users\\growell\\HTLN-BreedingBird-Data-Package\\src\\Hierarchy_Taxa.csv")
TSNlongnames <- read_csv(
"C:\\Users\\growell\\HTLN-BreedingBird-Data-Package\\src\\Itis_longnames.csv")
glimpse(TSNhierarchy)
glimpse(TSNlongnames)
hierarchy
my_columns <- my_string |>
separate_wider_delim(
hierarchy_string,
delim = "-",
names = c("col1", "col2", "col3", "col4",
"col5", "col6", "col7", "col8", "col9"),
too_many = "drop"
)
my_columns
print(my_columns, n = 207)
# This script processes the Active Projects dataset
library(tidyverse)
.libPaths()
q()
source("C:/Users/GRowell/Fast_import.R")
#See lines 2, 39, 41, 43, 45, and 51 to see if there is any information/code you need to change for your desired outputappendix.
#Imported the Excel files needed to make the appendix (the dataframe with all of the original data) and species look up table. Make necessary alterations in the import dataset field and name the appropriate data frames "appendix" and "SpeciesLookup" always!! Very important to keep the same title, will not work otherwise. Copy and paste the code at in the bottom left corner on the import dataset field window in for both dataframes and delete original code 3-10. REMEBEMBER TO USE THE NAMES "appendix" AND "SpeciesLookup" EXACTLY THE SAME!!!!
library(readxl)
appendix <- read_excel("~/Desktop/PIPE22appendix.xlsx",
sheet = "Sheet1", n_max = 14)
#See lines 2, 39, 41, 43, 45, and 51 to see if there is any information/code you need to change for your desired outputappendix.
#Imported the Excel files needed to make the appendix (the dataframe with all of the original data) and species look up table. Make necessary alterations in the import dataset field and name the appropriate data frames "appendix" and "SpeciesLookup" always!! Very important to keep the same title, will not work otherwise. Copy and paste the code at in the bottom left corner on the import dataset field window in for both dataframes and delete original code 3-10. REMEBEMBER TO USE THE NAMES "appendix" AND "SpeciesLookup" EXACTLY THE SAME!!!!
library(readxl)
appendix <- read_excel("PIPE22appendix.xlsx",
sheet = "Sheet1", n_max = 14)
install.packages("lubridate")
q()
install.packages("dataRetrieval")
q()
install.packages("data.table")
q()
install.packages("hrbrthemes")
q()
##########
#
# Step 1 - Load data
#
##########
library(tidyverse)
setwd("../HTLN-Data-Capture-Scripts/wetlands/src")
load_file <- read_csv("Woody.csv")
# glimpse(load_file)
##########
#
# Step 2 - select columns for Access import
# for big trees, need 40_1 onwards
#
##########
Access_data <- load_file |>
select(WoodyModule, WoodySpecies, EditDate, WoodySiteName,
Dgt40_1, Dgt40_2, Dgt40_3, Dgt40_4, Dgt40_5)
# glimpse(Access_data)
##########
#
# Step 3 - create columns for FeatureID and Module_No
#   and convert date format
#
##########
Access_data <- Access_data |>
mutate( FeatureID = WoodySiteName) |>
mutate(EditDate = (EditDate <- as.Date(EditDate, format = "%m/%d/%Y"))) |>
mutate( Module_No = WoodyModule )
##########
#
# Step 4 - Generate EventID from EditDate
#
##########
Access_data <- Access_data |>
mutate( EventID = str_c( 'CUVAWetlnd', EditDate)) |>
mutate(EventID = str_replace_all(EventID, "-", ""))
# glimpse(Access_data)
q()
##########
#
# Step 5 - create the LocationID column from the FeatureID column
#   and a lookup table from HTLNWetlands
#
##########
Locations_LUT <- read_csv("Locations_LUT.csv")
# glimpse(Locations_LUT)
Access_data <- Access_data |>
left_join(Locations_LUT, join_by(FeatureID))
# glimpse(Access_data)
q()
# load the Survey123 data
load_file1 <- read_csv("CUVA_VIBI_herb1.csv")
library(tidyverse)
setwd("./src")
getwd()
# load the Survey123 data
load_file1 <- read_csv("CUVA_VIBI_herb1.csv")
load_file2 <- read_csv("CUVA_VIBI_herb2.csv")
load_file3 <- read_csv("CUVA_VIBI_herb3.csv")
glimpse(load_file1)
glimpse(load_file2)
glimpse(load_file3)
# load the Survey123 data
load_file1 <- read_csv("CUVA_VIBI_herb1.csv")
load_file2 <- read_csv("CUVA_VIBI_herb2.csv")
load_file3 <- read_csv("CUVA_VIBI_herb3.csv")
glimpse(load_file1)
glimpse(load_file2)
glimpse(load_file3)
Access_data <- bind_rows(load_file1,load_file2)
library(tidyverse)
#setwd("./src")
# load the Survey123 data
load_file1 <- read_csv("CUVA_VIBI_herb1.csv")
load_file2 <- read_csv("CUVA_VIBI_herb2.csv")
load_file3 <- read_csv("CUVA_VIBI_herb3.csv")
glimpse(load_file1)
glimpse(load_file2)
glimpse(load_file3)
Access_data <- bind_rows(load_file1,load_file2)
glimpse(Access_data)
Access_data <- bind_rows(Access_data,load_file2)
glimpse(Access_data)
glimpse(load_file1)
glimpse(load_file2)
glimpse(load_file3)
load_file1 <- read_csv("CUVA_VIBI_herb1.csv")
load_file2 <- read_csv("CUVA_VIBI_herb2.csv")
load_file3 <- read_csv("CUVA_VIBI_herb3.csv")
glimpse(load_file1)
glimpse(load_file2)
glimpse(load_file3)
Access_data <- bind_rows(load_file1,load_file2)
glimpse(Access_data)
Access_data <- bind_rows(Access_data,load_file3)
glimpse(Access_data)
# select columns from Survey 123 and create FeatureID column
Access_data <- load_file |>
select(Species, Module, CoverClass, CoverClassAll, EditDate, HerbSiteName) |>
mutate( FeatureID = HerbSiteName) |>
mutate(EditDate = (EditDate <- as.Date(EditDate, format = "%m/%d/%Y")))
Access_data <- Access_data |>
select(Species, Module, CoverClass, CoverClassAll, EditDate, HerbSiteName) |>
mutate( FeatureID = HerbSiteName) |>
mutate(EditDate = (EditDate <- as.Date(EditDate, format = "%m/%d/%Y")))
Access_data <- Access_data |>
select(Species, Module, CoverClass_LT_6m, CoverClassAll, EditDate, HerbSiteName) |>
mutate(( FeatureID = HerbSiteName) & (CoverClass_LT_6m = CoverClass)) |>
mutate(EditDate = (EditDate <- as.Date(EditDate, format = "%m/%d/%Y")))
Access_data <- Access_data |>
select(Species, Module, CoverClass_LT_6m, CoverClassAll, EditDate, HerbSiteName) |>
mutate(
FeatureID = HerbSiteName,
CoverClass_LT_6m = CoverClass,
EditDate = (EditDate <- as.Date(EditDate, format = "%m/%d/%Y"))
)
library(tidyverse)
#setwd("./src")
# load the Survey123 data
load_file1 <- read_csv("CUVA_VIBI_herb1.csv")
load_file2 <- read_csv("CUVA_VIBI_herb2.csv")
load_file3 <- read_csv("CUVA_VIBI_herb3.csv")
glimpse(load_file1)
glimpse(load_file2)
glimpse(load_file3)
Access_data <- bind_rows(load_file1,load_file2)
glimpse(Access_data)
Access_data <- bind_rows(Access_data,load_file3)
glimpse(Access_data)
# select columns from Survey 123 and create FeatureID column
Access_data <- Access_data |>
select(Species, Module, CoverClass_LT_6m, CoverClassAll, EditDate, HerbSiteName) |>
mutate(
FeatureID = HerbSiteName,
CoverClass = CoverClass_LT_6m,
EditDate = (EditDate <- as.Date(EditDate, format = "%m/%d/%Y"))
)
glimpse(Access_data)
# Substitute NA with -9999 in CoverClass and CoverClassAll
Access_data$CoverClass <- Access_data$CoverClass |> replace_na(-9999)
Access_data$CoverClassAll <- Access_data$CoverClassAll |> replace_na(-9999)
# Generate EventID from EditDate
Access_data <- Access_data |>
mutate( EventID = str_c( 'CUVAWetlnd', EditDate)) |>
mutate(EventID = str_replace_all(EventID, "-", ""))
glimpse(Access_data)
# create the LocationID column from the FeatureID column
# and a lookup table from HTLNWetlands
Locations_LUT <- read_csv("Locations_LUT.csv")
glimpse(Locations_LUT)
Access_data <- Access_data |>
left_join(Locations_LUT, join_by(FeatureID))
glimpse(Access_data)
# create an output file with a timestamp
# and include it in the dataframe for reference
Access_data <- Access_data |>
mutate(
My_timestamp = now(),
My_timestamp = as.character(My_timestamp),
My_timestamp = str_replace_all(My_timestamp, " ", "_"),
My_timestamp = str_replace_all(My_timestamp, ":", ""),
Outfile = str_c("VIBI_herb_", My_timestamp,".csv")
)
glimpse(Access_data)
# clean up columns
Access_data <- Access_data |>
select(EventID, FeatureID, LocationID, Species, Module,
CoverClass, CoverClassAll, EditDate, Outfile )
glimpse(Access_data)
write_csv(Access_data, Access_data$Outfile[1])
writexl::write_xlsx(Access_data, "Load_VIBI_herb.xlsx")
library(tidyverse)
#setwd("./src")
# load the Survey123 data
load_file1 <- read_csv("CUVA_VIBI_herb1.csv")
load_file2 <- read_csv("CUVA_VIBI_herb2.csv")
load_file3 <- read_csv("CUVA_VIBI_herb3.csv")
glimpse(load_file1)
glimpse(load_file2)
glimpse(load_file3)
Access_data <- bind_rows(load_file1,load_file2)
glimpse(Access_data)
Access_data <- bind_rows(Access_data,load_file3)
glimpse(Access_data)
library(tidyverse)
#setwd("./src")
# load the Survey123 data
load_file1 <- read_csv("CUVA_VIBI_herb1.csv")
load_file2 <- read_csv("CUVA_VIBI_herb2.csv")
load_file3 <- read_csv("CUVA_VIBI_herb3.csv")
glimpse(load_file1)
glimpse(load_file2)
glimpse(load_file3)
Access_data <- bind_rows(load_file1,load_file2)
glimpse(Access_data)
Access_data <- bind_rows(Access_data,load_file3)
glimpse(Access_data)
# select columns from Survey 123 and create FeatureID column
Access_data <- Access_data |>
select(Species, Module, CoverClass_LT_6m, CoverClassAll, EditDate, HerbSiteName,
Other_species_not_on_dropdown_list) |>
mutate(
FeatureID = HerbSiteName,
CoverClass = CoverClass_LT_6m,
Other_species = Other_species_not_on_dropdown_list,
EditDate = (EditDate <- as.Date(EditDate, format = "%m/%d/%Y"))
)
glimpse(Access_data)
library(tidyverse)
#setwd("./src")
# load the Survey123 data
load_file1 <- read_csv("CUVA_VIBI_herb1.csv")
load_file2 <- read_csv("CUVA_VIBI_herb2.csv")
load_file3 <- read_csv("CUVA_VIBI_herb3.csv")
glimpse(load_file1)
glimpse(load_file2)
glimpse(load_file3)
Access_data <- bind_rows(load_file1,load_file2)
glimpse(Access_data)
Access_data <- bind_rows(Access_data,load_file3)
glimpse(Access_data)
# select columns from Survey 123 and create FeatureID column
Access_data <- Access_data |>
select(Species, Module, CoverClass_LT_6m, CoverClassAll, EditDate, HerbSiteName,
Other_species_not_on_dropdown_list) |>
mutate(
FeatureID = HerbSiteName,
CoverClass = CoverClass_LT_6m,
Other_species = Other_species_not_on_dropdown_list,
EditDate = (EditDate <- as.Date(EditDate, format = "%m/%d/%Y"))
)
glimpse(Access_data)
# Substitute NA with -9999 in CoverClass and CoverClassAll
Access_data$CoverClass <- Access_data$CoverClass |> replace_na(-9999)
Access_data$CoverClassAll <- Access_data$CoverClassAll |> replace_na(-9999)
# Generate EventID from EditDate
Access_data <- Access_data |>
mutate( EventID = str_c( 'CUVAWetlnd', EditDate)) |>
mutate(EventID = str_replace_all(EventID, "-", ""))
glimpse(Access_data)
# create the LocationID column from the FeatureID column
# and a lookup table from HTLNWetlands
Locations_LUT <- read_csv("Locations_LUT.csv")
library(tidyverse)
#setwd("./src")
# load the Survey123 data
load_file1 <- read_csv("CUVA_VIBI_herb1.csv")
load_file2 <- read_csv("CUVA_VIBI_herb2.csv")
load_file3 <- read_csv("CUVA_VIBI_herb3.csv")
glimpse(load_file1)
glimpse(load_file2)
glimpse(load_file3)
Access_data <- bind_rows(load_file1,load_file2)
glimpse(Access_data)
Access_data <- bind_rows(Access_data,load_file3)
glimpse(Access_data)
# select columns from Survey 123 and create FeatureID column
Access_data <- Access_data |>
select(Species, Module, CoverClass_LT_6m, CoverClassAll, EditDate, HerbSiteName,
Other_species_not_on_dropdown_list) |>
mutate(
FeatureID = HerbSiteName,
CoverClass = CoverClass_LT_6m,
Other_species = Other_species_not_on_dropdown_list,
EditDate = (EditDate <- as.Date(EditDate, format = "%m/%d/%Y"))
)
glimpse(Access_data)
# Substitute NA with -9999 in CoverClass and CoverClassAll
Access_data$CoverClass <- Access_data$CoverClass |> replace_na(-9999)
Access_data$CoverClassAll <- Access_data$CoverClassAll |> replace_na(-9999)
# Generate EventID from EditDate
Access_data <- Access_data |>
mutate( EventID = str_c( 'CUVAWetlnd', EditDate)) |>
mutate(EventID = str_replace_all(EventID, "-", ""))
glimpse(Access_data)
# create the LocationID column from the FeatureID column
# and a lookup table from HTLNWetlands
Locations_LUT <- read_csv("Locations_LUT.csv")
glimpse(Locations_LUT)
Access_data <- Access_data |>
left_join(Locations_LUT, join_by(FeatureID))
glimpse(Access_data)
# create an output file with a timestamp
# and include it in the dataframe for reference
Access_data <- Access_data |>
mutate(
My_timestamp = now(),
My_timestamp = as.character(My_timestamp),
My_timestamp = str_replace_all(My_timestamp, " ", "_"),
My_timestamp = str_replace_all(My_timestamp, ":", ""),
Outfile = str_c("VIBI_herb_", My_timestamp,".csv")
)
glimpse(Access_data)
# clean up columns
Access_data <- Access_data |>
select(EventID, FeatureID, LocationID, Species, Other_species, Module,
CoverClass, CoverClassAll, EditDate, Outfile )
glimpse(Access_data)
write_csv(Access_data, Access_data$Outfile[1])
writexl::write_xlsx(Access_data, "Load_VIBI_herb.xlsx")
Access_data <- Access_data |>
select(EventID, FeatureID, LocationID, Species, Other_species, Module,
CoverClass, CoverClassAll, EditDate, Outfile )
glimpse(Access_data)
write_csv(Access_data, Access_data$Outfile[1])
writexl::write_xlsx(Access_data, "Load_VIBI_herb_2023.xlsx")
